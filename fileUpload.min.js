!function(n){function t(t,e){var i=this;i.id=null,i.input=null,i.files=null,i.onChange="function"==typeof e.change?e.change:function(){},this.init=function(){var a=Math.floor(9999999999999*Math.random())+1;i.id="FU_"+a;var u=n(t).prop("name");n(t).removeAttr("name");var f="undefined"!=typeof e.multi&&e.multi?"multiple":"",l=n('<input type="file" name="'+u+'" id="'+i.id+'" style="opacity:0; position:absolute;" '+f+"/>");i.input=l[0],n(i.input).insertAfter(t),i.setHandlers()},this.clearFiles=function(){if(i.input.value){try{i.input.value=""}catch(n){}if(i.input.value){var t=document.createElement("form"),e=i.input.parentNode,a=i.input.nextSibling;t.appendChild(i.input),t.reset(),e.insertBefore(i.input,a)}}},i.setHandlers=function(){n(t).unbind("click").click(function(n){n.preventDefault(),i.input.click()}),n(i.input).unbind("change").change(function(n){i.files=n.target.files,i.onChange()})},this.getFiles=function(){return i.files},i.init()}n.fn.fileUpload=function(e){return 1==this.length&&"string"==typeof e&&"undefined"!=n(this[0]).data("fuInstance")?n(this).data("fuInstance")[e]():this.each(function(){params="object"==typeof e?e:{},"undefined"==typeof n(this).data("fuInstance")&&n(this).data("fuInstance",new t(this,params))})}}(jQuery);
